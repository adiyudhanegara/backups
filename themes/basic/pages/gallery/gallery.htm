title = "Galleries"
url = "/gallery/:slug"
layout = "frontend"
is_hidden = 0

[gallerySlug]
slug = "{{ :slug }}"
inline = 0
noImagesMessage = "No images in this gallery"
plugins[] = "lgThumbnail"
plugins[] = "lgZoom"
preload = 2
mode = "lg-slide"
speed = 600
loop = 1
pause = 5000
counter = 1
controls = 1
download = 1
escKey = 1
width = 300
height = 300
resizer = "auto"
==
<?php
function onStart()
{
    $slug = $this->param('slug');
    $videos = Media->listFolderContents("\/galleries/$slug", ['by' => 'title', 'direction' => 'asc'], 'video', true);
    $this["videos"] = array_map(function($image) {
        return [
            "path" => Media->url($image->path),
            "name" => basename($image->path),
        ];
    }, $videos);
}
?>
==
{% partial 'shared/galleryHeader' %}

<section class="page-section" id="gallery">
  <div class="container">
    {% component 'gallerySlug' %}
  </div>
  <div class="container mt-5">
      <div class="row">
          <div class="col-12">
              <div class="text-center" data-aos="zoom-in">
                  <h3 class="section-subheading text-muted">Explore Our Activities: Experience the Art of Silver Crafting</h3>
              </div>
              <div id="video-carousel" class="owl-carousel owl-theme">
                  {% for video in videos %}
                      {% set video_src = video.path %}
                      <div id="video-gallery-{{loop.index}}" class="player">
                          <video data-video-js controls
                              id="video-item-{{loop.index}}"
                              class="video-js vjs-theme-city"
                              preload="auto"
                          >
                              <source src="{{ video_src }}" type="video/mp4">
                          </video>
                      </div>
                  {% endfor %}
              </div>
          </div>
      </div>
  </div>
</section>
